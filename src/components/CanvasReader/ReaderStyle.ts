/**
* Copyright 2017-present Ampersand Technologies, Inc.
*/

import { FontDesc, FontTable, getFontKey } from 'overlib/client/components/Layout/Font';
import { registerSafeAreaDependent, safeAreaSize } from 'overlib/client/domClassManager';

export const SERIF_FONT = '"PT Serif", Times, "Times New Roman", serif';
export const SANS_SERIF_FONT = '"Montserrat", sans-serif';

export type FontSize
  = 'tiny'
  | 'small'
  | 'medium'
  | 'large'
  | 'xl'
  | 'xxl'
  | 'xxxl'
  | 'xxxxl'
  | 'xxxxxl'
  | 'xxxxxxl'
  ;

export const FONT_SIZES: StashOf<number> = {
  tiny: 14,
  small: 16,
  medium: 18,
  large: 20,
  xl: 22,
  xxl: 24,
  xxxl: 26,
  xxxxl: 28,
  xxxxxl: 30,
  xxxxxxl: 32,
};

interface FontTypeInfo {
  name: string;
  weight: 100|200|400|700|800;
  style: 'normal'|'italic';
  scaleMultiple?: number;
  scale?: number;
  lineSpacing?: number;
}

type StashWithDefault<P> = {
  default: P;
  [index: string]: P;
};

type FontTypeMap = StashWithDefault<FontTypeInfo>;

// add all fonts you want to preload here
export const FONT_TABLE: FontTable = {
  names: [SERIF_FONT, SANS_SERIF_FONT, 'Noto Serif', 'Raleway'],
  weights: [100, 400, 800],
  styles: ['normal', 'italic'],
  fontExpectations: {
    [getFontKey(SERIF_FONT, 'normal', 100)]: {
      a: 10.100000381469727, b: 10.899999618530273, c: 9.319999694824219, d: 11.100000381469727, e: 10.0600004196167,
      f: 6.840000152587891, g: 10.520000457763672, h: 11.739999771118164, i: 6.019999980926514, j: 5.760000228881836,
      k: 10.319999694824219, l: 6.019999980926514, m: 17.260000228881836, n: 11.880000114440918, o: 11.0600004196167,
      p: 11.319999694824219, q: 10.960000038146973, r: 7.679999828338623, s: 8.65999984741211, t: 7.420000076293945, u: 11.479999542236328,
      v: 10.140000343322754, w: 14.5600004196167, x: 10.380000114440918, y: 10.100000381469727, z: 9.760000228881836,
    },
    [getFontKey(SERIF_FONT, 'normal', 400)]: {
      a: 10.100000381469727, b: 10.899999618530273, c: 9.319999694824219, d: 11.100000381469727, e: 10.0600004196167,
      f: 6.840000152587891, g: 10.520000457763672, h: 11.739999771118164, i: 6.019999980926514, j: 5.760000228881836,
      k: 10.319999694824219, l: 6.019999980926514, m: 17.260000228881836, n: 11.880000114440918, o: 11.0600004196167,
      p: 11.319999694824219, q: 10.960000038146973, r: 7.679999828338623, s: 8.65999984741211, t: 7.420000076293945, u: 11.479999542236328,
      v: 10.140000343322754, w: 14.5600004196167, x: 10.380000114440918, y: 10.100000381469727, z: 9.760000228881836,
    },
    [getFontKey(SERIF_FONT, 'normal', 800)]: {
      a: 11.140000343322754, b: 11.760000228881836, c: 9.680000305175781, d: 11.979999542236328, e: 10.739999771118164,
      f: 7.440000057220459, g: 11.279999732971191, h: 12.800000190734863, i: 6.639999866485596, j: 6.400000095367432,
      k: 11.65999984741211, l: 6.639999866485596, m: 18.479999542236328, n: 12.880000114440918, o: 11.880000114440918,
      p: 12.180000305175781, q: 11.779999732971191, r: 8.619999885559082, s: 9.039999961853027, t: 7.980000019073486, u: 12.4399995803833,
      v: 10.779999732971191, w: 15.680000305175781, x: 11.199999809265137, y: 10.5600004196167, z: 10.319999694824219,
    },
    [getFontKey(SERIF_FONT, 'italic', 100)]: {
      a: 10.699999809265137, b: 10.520000457763672, c: 8.5600004196167, d: 10.699999809265137, e: 9.079999923706055,
      f: 5.940000057220459, g: 9.779999732971191, h: 10.859999656677246, i: 5.539999961853027, j: 5.5,
      k: 9.619999885559082, l: 5.539999961853027, m: 16, n: 11.039999961853027, o: 10.180000305175781,
      p: 10.84000015258789, q: 10.300000190734863, r: 7.699999809265137, s: 8.359999656677246, t: 6.739999771118164, u: 10.84000015258789,
      v: 8.9399995803833, w: 13.739999771118164, x: 9.079999923706055, y: 9.100000381469727, z: 8.720000267028809,
    },
    [getFontKey(SERIF_FONT, 'italic', 400)]: {
      a: 10.699999809265137, b: 10.520000457763672, c: 8.5600004196167, d: 10.699999809265137, e: 9.079999923706055,
      f: 5.940000057220459, g: 9.779999732971191, h: 10.859999656677246, i: 5.539999961853027, j: 5.5,
      k: 9.619999885559082, l: 5.539999961853027, m: 16, n: 11.039999961853027, o: 10.180000305175781,
      p: 10.84000015258789, q: 10.300000190734863, r: 7.699999809265137, s: 8.359999656677246, t: 6.739999771118164, u: 10.84000015258789,
      v: 8.9399995803833, w: 13.739999771118164, x: 9.079999923706055, y: 9.100000381469727, z: 8.720000267028809,
    },
    [getFontKey(SERIF_FONT, 'italic', 800)]: {
      a: 11.260000228881836, b: 11.300000190734863, c: 8.899999618530273, d: 11.399999618530273, e: 9.4399995803833,
      f: 6.320000171661377, g: 10.399999618530273, h: 11.619999885559082, i: 6.079999923706055, j: 5.980000019073486,
      k: 10.779999732971191, l: 5.980000019073486, m: 16.979999542236328, n: 11.760000228881836, o: 10.979999542236328,
      p: 11.4399995803833, q: 10.920000076293945, r: 8.699999809265137, s: 8.640000343322754, t: 7.340000152587891, u: 11.699999809265137,
      v: 9.619999885559082, w: 15.239999771118164, x: 10.119999885559082, y: 9.739999771118164, z: 9.359999656677246,
    },
    [getFontKey(SANS_SERIF_FONT, 'normal', 100)]: {
      a: 11.659988403320312,
      b: 13.5,
      c: 11.099990844726562,
      d: 13.5,
      e: 11.939987182617188,
      f: 6.55999755859375,
      g: 13.639999389648438,
      h: 13.459991455078125,
      i: 5.2199859619140625,
      j: 5.3199920654296875,
      k: 11.759994506835938,
      l: 5.2199859619140625,
      m: 21.279998779296875,
      n: 13.459991455078125,
      o: 12.399993896484375,
      p: 13.5,
      q: 13.5,
      r: 7.8799896240234375,
      s: 9.55999755859375,
      t: 7.959991455078125,
      u: 13.379989624023438,
      v: 10.55999755859375,
      w: 17.239990234375,
      x: 10.379989624023438,
      y: 10.55999755859375,
      z: 10.05999755859375,
    },
    [getFontKey(SANS_SERIF_FONT, 'italic', 100)]: {
      a: 13.5,
      b: 13.5,
      c: 11.099990844726562,
      d: 13.5,
      e: 11.959991455078125,
      f: 6.55999755859375,
      g: 13.639999389648438,
      h: 13.459991455078125,
      i: 5.2199859619140625,
      j: 5.3199920654296875,
      k: 11.519989013671875,
      l: 5.2199859619140625,
      m: 21.279998779296875,
      n: 13.459991455078125,
      o: 12.399993896484375,
      p: 13.5,
      q: 13.5,
      r: 7.8799896240234375,
      s: 9.55999755859375,
      t: 7.959991455078125,
      u: 13.379989624023438,
      v: 10.55999755859375,
      w: 17.219985961914062,
      x: 10.379989624023438,
      y: 10.55999755859375,
      z: 10.05999755859375,
    },
    [getFontKey(SANS_SERIF_FONT, 'normal', 400)]: {
      a: 11.79998779296875,
      b: 13.55999755859375,
      c: 11.259994506835938,
      d: 13.55999755859375,
      e: 12.079986572265625,
      f: 6.779998779296875,
      g: 13.719985961914062,
      h: 13.539993286132812,
      i: 5.3799896240234375,
      j: 5.4799957275390625,
      k: 12.019989013671875,
      l: 5.3799896240234375,
      m: 21.219985961914062,
      n: 13.539993286132812,
      o: 12.539993286132812,
      p: 13.55999755859375,
      q: 13.55999755859375,
      r: 8.019989013671875,
      s: 9.779998779296875,
      t: 8.1199951171875,
      u: 13.459991455078125,
      v: 10.839996337890625,
      w: 17.579986572265625,
      x: 10.67999267578125,
      y: 10.839996337890625,
      z: 10.219985961914062,
    },
    [getFontKey(SANS_SERIF_FONT, 'italic', 400)]: {
      a: 13.55999755859375,
      b: 13.55999755859375,
      c: 11.259994506835938,
      d: 13.55999755859375,
      e: 12.079986572265625,
      f: 6.779998779296875,
      g: 13.719985961914062,
      h: 13.539993286132812,
      i: 5.3799896240234375,
      j: 5.4799957275390625,
      k: 11.79998779296875,
      l: 5.3799896240234375,
      m: 21.219985961914062,
      n: 13.539993286132812,
      o: 12.539993286132812,
      p: 13.55999755859375,
      q: 13.55999755859375,
      r: 8.019989013671875,
      s: 9.779998779296875,
      t: 8.1199951171875,
      u: 13.459991455078125,
      v: 10.839996337890625,
      w: 17.579986572265625,
      x: 10.67999267578125,
      y: 10.839996337890625,
      z: 10.219985961914062,
    },
    [getFontKey(SANS_SERIF_FONT, 'normal', 800)]: {
      a: 12.339996337890625,
      b: 13.79998779296875,
      c: 11.819992065429688,
      d: 13.839996337890625,
      e: 12.6199951171875,
      f: 7.739990234375,
      g: 14,
      h: 13.819992065429688,
      i: 6.019989013671875,
      j: 6.1399993896484375,
      k: 13.199996948242188,
      l: 6.019989013671875,
      m: 20.979995727539062,
      n: 13.819992065429688,
      o: 13.099990844726562,
      p: 13.79998779296875,
      q: 13.79998779296875,
      r: 8.6199951171875,
      s: 10.6199951171875,
      t: 8.699996948242188,
      u: 13.739990234375,
      v: 11.959991455078125,
      w: 18.739990234375,
      x: 11.899993896484375,
      y: 11.959991455078125,
      z: 10.8599853515625,
    },
    [getFontKey(SANS_SERIF_FONT, 'italic', 800)]: {
      a: 13.79998779296875,
      b: 13.79998779296875,
      c: 11.819992065429688,
      d: 13.839996337890625,
      e: 12.55999755859375,
      f: 7.739990234375,
      g: 14,
      h: 13.819992065429688,
      i: 6,
      j: 6.1199951171875,
      k: 12.899993896484375,
      l: 6.019989013671875,
      m: 20.979995727539062,
      n: 13.819992065429688,
      o: 13.079986572265625,
      p: 13.79998779296875,
      q: 13.79998779296875,
      r: 8.6199951171875,
      s: 10.6199951171875,
      t: 8.699996948242188,
      u: 13.739990234375,
      v: 11.959991455078125,
      w: 18.819992065429688,
      x: 11.899993896484375,
      y: 11.959991455078125,
      z: 10.8599853515625,
    },
    'Raleway:normal:100': {
        'a': 10.739990234375,
        'b': 12.239990234375,
        'c': 10.899993896484375,
        'd': 12.29998779296875,
        'e': 11.659988403320312,
        'f': 6.3599853515625,
        'g': 12.239990234375,
        'h': 11.519989013671875,
        'i': 4.1399993896484375,
        'j': 4.279998779296875,
        'k': 10.439987182617188,
        'l': 5.17999267578125,
        'm': 18.29998779296875,
        'n': 11.519989013671875,
        'o': 11.839996337890625,
        'p': 12.239990234375,
        'q': 12.239990234375,
        'r': 6.8199920654296875,
        's': 9.6199951171875,
        't': 6.399993896484375,
        'u': 11.739990234375,
        'v': 10.55999755859375,
        'w': 16.1199951171875,
        'x': 9.919998168945312,
        'y': 10.79998779296875,
        'z': 9.79998779296875,
    },
    'Raleway:italic:100': {
        'a': 11.819992065429688,
        'b': 11.719985961914062,
        'c': 10.439987182617188,
        'd': 11.819992065429688,
        'e': 10.579986572265625,
        'f': 6.2199859619140625,
        'g': 11.719985961914062,
        'h': 11.039993286132812,
        'i': 4.019989013671875,
        'j': 4.17999267578125,
        'k': 10.599990844726562,
        'l': 4.9799957275390625,
        'm': 17.479995727539062,
        'n': 11.039993286132812,
        'o': 11.379989624023438,
        'p': 11.739990234375,
        'q': 11.719985961914062,
        'r': 6.6599884033203125,
        's': 9.219985961914062,
        't': 6.1199951171875,
        'u': 11.239990234375,
        'v': 9.519989013671875,
        'w': 14.8599853515625,
        'x': 9.439987182617188,
        'y': 9.55999755859375,
        'z': 9.259994506835938,
    },
    'Raleway:normal:400': {
        'a': 10.899993896484375,
        'b': 12.339996337890625,
        'c': 10.979995727539062,
        'd': 12.439987182617188,
        'e': 11.739990234375,
        'f': 6.5999908447265625,
        'g': 12.3599853515625,
        'h': 11.659988403320312,
        'i': 4.3599853515625,
        'j': 4.5,
        'k': 10.599990844726562,
        'l': 5.4399871826171875,
        'm': 18.379989624023438,
        'n': 11.659988403320312,
        'o': 11.899993896484375,
        'p': 12.339996337890625,
        'q': 12.339996337890625,
        'r': 7.019989013671875,
        's': 9.739990234375,
        't': 6.6999969482421875,
        'u': 11.879989624023438,
        'v': 10.659988403320312,
        'w': 16.259994506835938,
        'x': 10.079986572265625,
        'y': 10.839996337890625,
        'z': 9.839996337890625,
    },
    'Raleway:italic:400': {
        'a': 11.959991455078125,
        'b': 11.839996337890625,
        'c': 10.519989013671875,
        'd': 11.959991455078125,
        'e': 10.67999267578125,
        'f': 6.4399871826171875,
        'g': 11.839996337890625,
        'h': 11.17999267578125,
        'i': 4.2599945068359375,
        'j': 4.399993896484375,
        'k': 10.719985961914062,
        'l': 5.279998779296875,
        'm': 17.55999755859375,
        'n': 11.17999267578125,
        'o': 11.459991455078125,
        'p': 11.8599853515625,
        'q': 11.839996337890625,
        'r': 6.8599853515625,
        's': 9.3599853515625,
        't': 6.4199981689453125,
        'u': 11.379989624023438,
        'v': 9.819992065429688,
        'w': 15.099990844726562,
        'x': 9.6199951171875,
        'y': 9.779998779296875,
        'z': 9.319992065429688,
    },
    'Raleway:normal:800': {
        'a': 11.479995727539062,
        'b': 12.67999267578125,
        'c': 11.279998779296875,
        'd': 12.899993896484375,
        'e': 11.979995727539062,
        'f': 7.399993896484375,
        'g': 12.67999267578125,
        'h': 12.079986572265625,
        'i': 5.0999908447265625,
        'j': 5.2199859619140625,
        'k': 11.159988403320312,
        'l': 6.339996337890625,
        'm': 18.6199951171875,
        'n': 12.079986572265625,
        'o': 12.1199951171875,
        'p': 12.67999267578125,
        'q': 12.67999267578125,
        'r': 7.739990234375,
        's': 9.939987182617188,
        't': 7.67999267578125,
        'u': 12.3599853515625,
        'v': 10.979995727539062,
        'w': 16.779998779296875,
        'x': 10.6199951171875,
        'y': 11,
        'z': 9.8599853515625,
    },
    'Raleway:italic:800': {
        'a': 12.479995727539062,
        'b': 12.239990234375,
        'c': 10.839996337890625,
        'd': 12.479995727539062,
        'e': 11.019989013671875,
        'f': 7.2199859619140625,
        'g': 12.219985961914062,
        'h': 11.639999389648438,
        'i': 5.05999755859375,
        'j': 5.1599884033203125,
        'k': 11.199996948242188,
        'l': 6.17999267578125,
        'm': 17.839996337890625,
        'n': 11.639999389648438,
        'o': 11.719985961914062,
        'p': 12.239990234375,
        'q': 12.219985961914062,
        'r': 7.55999755859375,
        's': 9.599990844726562,
        't': 7.459991455078125,
        'u': 11.899993896484375,
        'v': 10.519989013671875,
        'w': 15.79998779296875,
        'x': 10.219985961914062,
        'y': 10.399993896484375,
        'z': 9.419998168945312,
    },
    'Noto Serif:normal:100': {
        'a': 11.259765625,
        'b': 12.275390625,
        'c': 9.84375,
        'd': 12.275390625,
        'e': 10.703125,
        'f': 7.3828125,
        'g': 10.76171875,
        'h': 12.6953125,
        'i': 6.396484375,
        'j': 5.99609375,
        'k': 11.69921875,
        'l': 6.201171875,
        'm': 18.896484375,
        'n': 12.900390625,
        'o': 11.54296875,
        'p': 12.275390625,
        'q': 12.275390625,
        'r': 9.423828125,
        's': 9.0234375,
        't': 7.041015625,
        'u': 12.6953125,
        'v': 11.58203125,
        'w': 17.236328125,
        'x': 11.5625,
        'y': 11.298828125,
        'z': 10.224609375,
    },
    'Noto Serif:italic:100': {
        'a': 11.58203125,
        'b': 11.240234375,
        'c': 9.736328125,
        'd': 11.58203125,
        'e': 9.86328125,
        'f': 6.357421875,
        'g': 11.123046875,
        'h': 11.982421875,
        'i': 6.083984375,
        'j': 5.8203125,
        'k': 11.376953125,
        'l': 6.083984375,
        'm': 17.919921875,
        'n': 11.982421875,
        'o': 11.484375,
        'p': 11.54296875,
        'q': 11.201171875,
        'r': 9.35546875,
        's': 9.27734375,
        't': 7.36328125,
        'u': 11.982421875,
        'v': 10.76171875,
        'w': 16.376953125,
        'x': 10.91796875,
        'y': 10.556640625,
        'z': 10.224609375,
    },
    'Noto Serif:normal:400': {
        'a': 11.259765625,
        'b': 12.275390625,
        'c': 9.84375,
        'd': 12.275390625,
        'e': 10.703125,
        'f': 7.3828125,
        'g': 10.76171875,
        'h': 12.6953125,
        'i': 6.396484375,
        'j': 5.99609375,
        'k': 11.69921875,
        'l': 6.201171875,
        'm': 18.896484375,
        'n': 12.900390625,
        'o': 11.54296875,
        'p': 12.275390625,
        'q': 12.275390625,
        'r': 9.423828125,
        's': 9.0234375,
        't': 7.041015625,
        'u': 12.6953125,
        'v': 11.58203125,
        'w': 17.236328125,
        'x': 11.5625,
        'y': 11.298828125,
        'z': 10.224609375,
    },
    'Noto Serif:italic:400': {
        'a': 11.58203125,
        'b': 11.240234375,
        'c': 9.736328125,
        'd': 11.58203125,
        'e': 9.86328125,
        'f': 6.357421875,
        'g': 11.123046875,
        'h': 11.982421875,
        'i': 6.083984375,
        'j': 5.8203125,
        'k': 11.376953125,
        'l': 6.083984375,
        'm': 17.919921875,
        'n': 11.982421875,
        'o': 11.484375,
        'p': 11.54296875,
        'q': 11.201171875,
        'r': 9.35546875,
        's': 9.27734375,
        't': 7.36328125,
        'u': 11.982421875,
        'v': 10.76171875,
        'w': 16.376953125,
        'x': 10.91796875,
        'y': 10.556640625,
        'z': 10.224609375,
    },
    'Noto Serif:normal:800': {
        'a': 11.982421875,
        'b': 12.978515625,
        'c': 10.537109375,
        'd': 12.978515625,
        'e': 11.416015625,
        'f': 8.14453125,
        'g': 11.201171875,
        'h': 13.33984375,
        'i': 7.041015625,
        'j': 6.904296875,
        'k': 12.724609375,
        'l': 7.041015625,
        'm': 19.716796875,
        'n': 13.33984375,
        'o': 12.255859375,
        'p': 12.900390625,
        'q': 12.958984375,
        'r': 10.458984375,
        's': 9.755859375,
        't': 8.095703125,
        'u': 13.33984375,
        'v': 12.119140625,
        'w': 17.119140625,
        'x': 12.919921875,
        'y': 11.58203125,
        'z': 10.576171875,
    },
    'Noto Serif:italic:800': {
        'a': 13.30078125,
        'b': 12.4609375,
        'c': 10.556640625,
        'd': 13.30078125,
        'e': 10.703125,
        'f': 8.076171875,
        'g': 11.6015625,
        'h': 13.115234375,
        'i': 7.080078125,
        'j': 6.7578125,
        'k': 11.943359375,
        'l': 7.080078125,
        'm': 19.384765625,
        'n': 13.4375,
        'o': 12.36328125,
        'p': 12.4609375,
        'q': 12.6171875,
        'r': 11.015625,
        's': 10.283203125,
        't': 8.33984375,
        'u': 13.45703125,
        'v': 11.71875,
        'w': 17.5,
        'x': 12.080078125,
        'y': 11.71875,
        'z': 11.162109375,
    },
  },
};

// create fontMaps for different editors here
const defaultFontMap: FontTypeMap = {
  default: {
    name: SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
  layer: {
    name: SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
  chapter: {
    name: SANS_SERIF_FONT,
    weight: 800,
    style: 'normal',
    scaleMultiple: 1.25,
  },
  section: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 1.5,
  },
  scene: {
    name: SANS_SERIF_FONT,
    weight: 200,
    style: 'normal',
    scaleMultiple: 1,
  },
  authorNote: {
    name: SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
  reaction: {
    name: SANS_SERIF_FONT,
    weight: 800,
    style: 'italic',
    scaleMultiple: 1,
    lineSpacing: 1.25,
  },
  commentEdit: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 1,
  },
  replyButton: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 0.7,
    lineSpacing: 1,
  },
  attribution: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.6,
    lineSpacing: 1,
  },
  editButton: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.6,
    lineSpacing: 1,
  },
  authorSays: {
    name: SANS_SERIF_FONT,
    weight: 200,
    style: 'italic',
    scaleMultiple: 0.8,
    lineSpacing: 2,
  },
  reactionCount: {
    name: SANS_SERIF_FONT,
    weight: 800,
    style: 'normal',
    scale: 17,
    lineSpacing: 1,
  },
  pageCount: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  inlineButtonLabel: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scale: 11,
    lineSpacing: 0,
  },
  inlineButtonTagline: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scale: 13,
    lineSpacing: 0,
  },
  commentSummary: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  commentSummaryButton: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  commentHintHeader: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'italic',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  commentHintFooter: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  chatleft: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
  chatright: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
  chatheader: {
    name: SANS_SERIF_FONT,
    weight: 100,
    style: 'normal',
    scaleMultiple: 0.8,
    lineSpacing: 0,
  },
  reference: {
    name: SANS_SERIF_FONT,
    weight: 400,
    style: 'normal',
    scaleMultiple: 1,
    lineSpacing: 1.5,
  },
};

export interface ParagraphLayout {
  padding: number;
  spacing: number;
}

export interface ParagraphLayouts {
  default: ParagraphLayout;
  [index: string]: ParagraphLayout;
}

const defaultLayout: ParagraphLayout = {
  padding: 20,
  spacing: 10,
};

const tightLayout: ParagraphLayout = {
  padding: 0,
  spacing: 5,
};

const reactionLayout: ParagraphLayout = {
  padding: 0,
  spacing: 10,
};

const layerLayout: ParagraphLayout = {
  padding: 10,
  spacing: 20,
};

const noMargin: ParagraphLayout = {
  padding: 0,
  spacing: 0,
};

const editPadding: ParagraphLayout = {
  padding: 0,
  spacing: 10,
};

const paraLayouts: ParagraphLayouts = {
  default: defaultLayout,
  attribution: tightLayout,
  reaction: reactionLayout,
  reactionCount: tightLayout,
  layer: layerLayout,
  pageCount: noMargin,
  inlineButtonLabel: noMargin,
  inlineButtonTagline: noMargin,
  commentEdit: editPadding,
  replyButton: noMargin,
};

export function ParaLayout(type?: string): ParagraphLayout {
  return (type && paraLayouts[type]) || paraLayouts.default;
}

export function getFontStyle(type: string, fontSizeStr: FontSize): React.CSSProperties {
  const fontType = defaultFontMap[type] || defaultFontMap.default;

  const fontDesc: FontDesc = {
    fontFamily: fontType.name,
    fontSize: fontType.scaleMultiple ? FONT_SIZES[fontSizeStr] * (fontType.scaleMultiple as number) : (fontType.scale || 10),
    fontStyle: fontType.style,
    fontWeight: fontType.weight,
    textDecoration: 'none',
    lineSpacing: fontType.lineSpacing || 1.75,
    verticalAlign: 'baseline',
  };

  return fontDesc;
}

export interface LayoutConstants {
  readonly MIN_SCALE_FACTOR: number;
  readonly SCALE_FACTOR_VELOCITY: number;
  readonly NOTE_AREA_HEIGHT: number;
  readonly BOTTOM_BAR_HEIGHT: number;
  readonly SAFE_AREA_BOTTOM: number;
  readonly TOP_BAR_HEIGHT: number;
  readonly TOP_BAR_TOC_HEIGHT: number;
  readonly REACTION_BAR_HEIGHT: number;
  readonly SENTIMENT_BAR_HEIGHT: number;
  readonly TAB_BAR_HEIGHT: number;
  readonly TAB_BAR_HEIGHT_IPAD: number;
  readonly PLUS_BUTTON_BOT_OFFSET: number;
}

export let LAYOUT_CONSTANTS: LayoutConstants;

function computeLayoutConstants() {
  LAYOUT_CONSTANTS = {
    MIN_SCALE_FACTOR: 0.333,
    SCALE_FACTOR_VELOCITY: 2 / 1000, // fract / ms
    NOTE_AREA_HEIGHT: 200, // TODO, ENFORE THIS INSTEAD OF MEASURING IT
    BOTTOM_BAR_HEIGHT: 43 + safeAreaSize.bottom,
    SAFE_AREA_BOTTOM: safeAreaSize.bottom,
    TOP_BAR_HEIGHT: 66 + safeAreaSize.top,
    TOP_BAR_TOC_HEIGHT: 142 + safeAreaSize.top,
    REACTION_BAR_HEIGHT: 135 + safeAreaSize.bottom, // 175 if you add tagline back in
    SENTIMENT_BAR_HEIGHT: 250 + safeAreaSize.bottom,
    TAB_BAR_HEIGHT: 72 + safeAreaSize.bottom * 0.7, // full safe area is just too big
    TAB_BAR_HEIGHT_IPAD: 56 + safeAreaSize.bottom * 0.7, // full safe area is just too big
    PLUS_BUTTON_BOT_OFFSET: 20 + safeAreaSize.bottom * 0.5,
  };
}

computeLayoutConstants();
registerSafeAreaDependent(computeLayoutConstants); // will update once the safe area is calculated
